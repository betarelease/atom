{"version":3,"sources":["../../src/components/FileInput.js"],"names":[],"mappings":"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","file":"FileInput.js","sourcesContent":["var _ = require('lodash');\nvar classNames = require('classnames');\nvar React = require('react');\n\nvar FileInput = React.createClass({\n  getInitialState: function() {\n    return {\n      errText: '',\n    };\n  },\n\n  handleOnChange: function(ev) {\n    this.setState({errText: ''});\n\n    var files = [];\n    var error;\n\n    var done = _.after(ev.target.files.length, function() {\n      // this.refs.file.getDOMNode().value = '';\n      if (error) {\n        this.setState({errText: error});\n      } else if (this.props.onChange) {\n        this.props.onChange(\n          _.pluck(files, 'value'),\n          _.pluck(files, 'data')\n        );\n      }\n    }.bind(this));\n\n    _.forEach(ev.target.files, function(file) {\n      var reader = new FileReader();\n      reader.onload = function() {\n        var vals = reader.result.split(',');\n        if (vals.length !== 2) {\n          error = 'Invalid file data';\n        } else {\n          files.push({value: file.name, data: vals[1]});\n        }\n        done();\n      };\n      reader.readAsDataURL(file);\n    });\n  },\n\n  render: function() {\n    var classes = classNames(this.props.className, 'btn btn-default btn-file', {\n      'readonly': this.props.readOnly === true,\n      'disabled': this.props.disabled === true,\n    });\n\n    var label;\n    if (this.props.label) {\n      label = this.props.label;\n    } else if (this.props.multiple) {\n      label = 'Choose files';\n    } else {\n      label = 'Choose file';\n    }\n\n    return (\n      <span>\n        <span className={classes}>\n          <i className=\"glyphicon glyphicon-file\" /> {label}\n          <input\n            ref=\"file\"\n            type=\"file\"\n            name={this.props.name}\n            className=\"form-control\"\n            onChange={this.handleOnChange}\n            readOnly={this.props.readOnly}\n            multiple={this.props.multiple}\n            disabled={this.props.disabled} />\n        </span>\n        <small className=\"text-danger\"> {this.state.errText}</small>\n      </span>\n    );\n  },\n});\n\nmodule.exports = FileInput;\n"]}